# Требования и функции

**Дата создания:** 2026-02-12  
**Последнее обновление:** 2026-02-12

## Системные требования

### Функциональные требования

1. **Поиск компаний по фильтрам**
   - Фильтрация по стране
   - Фильтрация по городу
   - Фильтрация по категориям бизнеса
   - Комбинирование фильтров

2. **Получение данных о компаниях**
   - Название компании
   - Номер телефона
   - Адрес
   - Рейтинг
   - Количество голосов/отзывов
   - Информация о компании (описание)

3. **Экспорт результатов**
   - Экспорт в формат Excel (.xlsx)
   - Структурированные данные с заголовками колонок
   - Сохранение файла с указанием параметров поиска

4. **Интерфейс пользователя**
   - CLI интерфейс для ввода параметров поиска
   - Отображение прогресса поиска
   - Информация о количестве найденных компаний

### Нефункциональные требования

1. **Производительность**
   - Обработка больших объемов результатов (пагинация API)
   - Оптимизация запросов к API

2. **Надежность**
   - Обработка ошибок API
   - Повторные попытки при сбоях
   - Валидация входных данных

3. **Удобство использования**
   - Простой CLI интерфейс
   - Понятные сообщения об ошибках
   - Документация по использованию

## Описания функций

### Функция 1: Поиск компаний

**Входные данные:**
- Страна (опционально)
- Город (опционально)
- Категория бизнеса (опционально)
- API ключ не требуется (используется веб-скрапинг)

**Процесс:**
1. Валидация входных параметров
2. Формирование запроса к 2GIS API
3. Выполнение запроса с пагинацией
4. Сбор всех результатов

**Выходные данные:**
- Список компаний с полной информацией

### Функция 2: Экспорт в Excel

**Входные данные:**
- Список компаний с данными
- Имя файла для сохранения (опционально)

**Процесс:**
1. Создание Excel файла
2. Заполнение заголовков колонок
3. Заполнение данными компаний
4. Сохранение файла

**Выходные данные:**
- Excel файл (.xlsx) с данными компаний

## Бизнес-правила

1. **Веб-скрапинг:**
   - API ключ не требуется - используется публичный доступ к сайту 2gis.ru
   - Данные извлекаются напрямую с веб-страниц
   - Необходимо соблюдать разумные задержки между запросами
   - Возможны ограничения при слишком частых запросах

2. **Обработка данных:**
   - Данные не хранятся локально, только экспортируются
   - Каждый поиск выполняется заново через API
   - Результаты всегда актуальные

3. **Формат экспорта:**
   - Excel файл содержит следующие колонки:
     - Название компании
     - Телефон
     - Адрес
     - Рейтинг
     - Количество голосов
     - Информация о компании

## Крайние случаи

1. **API недоступен:**
   - Повторные попытки с экспоненциальной задержкой
   - Информативное сообщение об ошибке

2. **Нет результатов поиска:**
   - Информативное сообщение пользователю
   - Предложение проверить параметры поиска

3. **Превышение лимитов API:**
   - Информация о достижении лимита
   - Рекомендация использовать платную подписку

4. **Неполные данные компании:**
   - Пропуск отсутствующих полей
   - Заполнение пустыми значениями или "N/A"

5. **Ошибки записи файла:**
   - Проверка прав доступа
   - Информативное сообщение об ошибке
